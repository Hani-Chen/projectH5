var data = {
  "sourceW": 134,
  "sourceH": 134,
  "w": 501,
  "h": 377,
  "file": "lighter_sprites.png",
  "frames": [
    {
      "width": 124,
      "height": 129,
      "offX": 5,
      "offY": 0,
      "x": 0,
      "y": 0
    },
    {
      "width": 124,
      "height": 129,
      "offX": 5,
      "offY": 0,
      "x": 0,
      "y": 0
    },
    {
      "width": 124,
      "height": 129,
      "offX": 5,
      "offY": 0,
      "x": 0,
      "y": 0
    },
    {
      "width": 124,
      "height": 129,
      "offX": 5,
      "offY": 0,
      "x": 0,
      "y": 0
    },
    {
      "width": 124,
      "height": 129,
      "offX": 5,
      "offY": 0,
      "x": 0,
      "y": 0
    },
    {
      "width": 124,
      "height": 124,
      "offX": 5,
      "offY": 5,
      "x": 129,
      "y": 129
    },
    {
      "width": 124,
      "height": 124,
      "offX": 5,
      "offY": 5,
      "x": 129,
      "y": 129
    },
    {
      "width": 124,
      "height": 124,
      "offX": 5,
      "offY": 5,
      "x": 129,
      "y": 129
    },
    {
      "width": 124,
      "height": 124,
      "offX": 5,
      "offY": 5,
      "x": 129,
      "y": 129
    },
    {
      "width": 124,
      "height": 124,
      "offX": 5,
      "offY": 5,
      "x": 129,
      "y": 129
    },
    {
      "width": 124,
      "height": 124,
      "offX": 5,
      "offY": 5,
      "x": 253,
      "y": 129
    },
    {
      "width": 124,
      "height": 124,
      "offX": 5,
      "offY": 5,
      "x": 253,
      "y": 129
    },
    {
      "width": 124,
      "height": 124,
      "offX": 5,
      "offY": 5,
      "x": 253,
      "y": 129
    },
    {
      "width": 124,
      "height": 124,
      "offX": 5,
      "offY": 5,
      "x": 253,
      "y": 129
    },
    {
      "width": 124,
      "height": 124,
      "offX": 5,
      "offY": 5,
      "x": 253,
      "y": 129
    },
    {
      "width": 129,
      "height": 124,
      "offX": 5,
      "offY": 5,
      "x": 124,
      "y": 0
    },
    {
      "width": 129,
      "height": 124,
      "offX": 5,
      "offY": 5,
      "x": 124,
      "y": 0
    },
    {
      "width": 129,
      "height": 124,
      "offX": 5,
      "offY": 5,
      "x": 124,
      "y": 0
    },
    {
      "width": 129,
      "height": 124,
      "offX": 5,
      "offY": 5,
      "x": 124,
      "y": 0
    },
    {
      "width": 129,
      "height": 124,
      "offX": 5,
      "offY": 5,
      "x": 124,
      "y": 0
    },
    {
      "width": 124,
      "height": 124,
      "offX": 5,
      "offY": 5,
      "x": 0,
      "y": 253
    },
    {
      "width": 124,
      "height": 124,
      "offX": 5,
      "offY": 5,
      "x": 0,
      "y": 253
    },
    {
      "width": 124,
      "height": 124,
      "offX": 5,
      "offY": 5,
      "x": 0,
      "y": 253
    },
    {
      "width": 124,
      "height": 124,
      "offX": 5,
      "offY": 5,
      "x": 0,
      "y": 253
    },
    {
      "width": 124,
      "height": 124,
      "offX": 5,
      "offY": 5,
      "x": 124,
      "y": 253
    },
    {
      "width": 124,
      "height": 124,
      "offX": 5,
      "offY": 5,
      "x": 124,
      "y": 253
    },
    {
      "width": 124,
      "height": 124,
      "offX": 5,
      "offY": 5,
      "x": 124,
      "y": 253
    },
    {
      "width": 124,
      "height": 124,
      "offX": 5,
      "offY": 5,
      "x": 124,
      "y": 253
    },
    {
      "width": 124,
      "height": 124,
      "offX": 5,
      "offY": 5,
      "x": 124,
      "y": 253
    },
    {
      "width": 124,
      "height": 129,
      "offX": 5,
      "offY": 5,
      "x": 253,
      "y": 0
    },
    {
      "width": 124,
      "height": 129,
      "offX": 5,
      "offY": 5,
      "x": 253,
      "y": 0
    },
    {
      "width": 124,
      "height": 129,
      "offX": 5,
      "offY": 5,
      "x": 253,
      "y": 0
    },
    {
      "width": 124,
      "height": 129,
      "offX": 5,
      "offY": 5,
      "x": 253,
      "y": 0
    },
    {
      "width": 124,
      "height": 129,
      "offX": 5,
      "offY": 5,
      "x": 253,
      "y": 0
    },
    {
      "width": 124,
      "height": 124,
      "offX": 5,
      "offY": 5,
      "x": 248,
      "y": 253
    },
    {
      "width": 124,
      "height": 124,
      "offX": 5,
      "offY": 5,
      "x": 248,
      "y": 253
    },
    {
      "width": 124,
      "height": 124,
      "offX": 5,
      "offY": 5,
      "x": 248,
      "y": 253
    },
    {
      "width": 124,
      "height": 124,
      "offX": 5,
      "offY": 5,
      "x": 248,
      "y": 253
    },
    {
      "width": 124,
      "height": 124,
      "offX": 5,
      "offY": 5,
      "x": 248,
      "y": 253
    },
    {
      "width": 124,
      "height": 124,
      "offX": 5,
      "offY": 5,
      "x": 377,
      "y": 0
    },
    {
      "width": 124,
      "height": 124,
      "offX": 5,
      "offY": 5,
      "x": 377,
      "y": 0
    },
    {
      "width": 124,
      "height": 124,
      "offX": 5,
      "offY": 5,
      "x": 377,
      "y": 0
    },
    {
      "width": 124,
      "height": 124,
      "offX": 5,
      "offY": 5,
      "x": 377,
      "y": 0
    },
    {
      "width": 124,
      "height": 124,
      "offX": 5,
      "offY": 5,
      "x": 377,
      "y": 0
    },
    {
      "width": 129,
      "height": 124,
      "offX": 0,
      "offY": 5,
      "x": 0,
      "y": 129
    },
    {
      "width": 129,
      "height": 124,
      "offX": 0,
      "offY": 5,
      "x": 0,
      "y": 129
    },
    {
      "width": 129,
      "height": 124,
      "offX": 0,
      "offY": 5,
      "x": 0,
      "y": 129
    },
    {
      "width": 129,
      "height": 124,
      "offX": 0,
      "offY": 5,
      "x": 0,
      "y": 129
    },
    {
      "width": 124,
      "height": 124,
      "offX": 5,
      "offY": 5,
      "x": 377,
      "y": 124
    },
    {
      "width": 124,
      "height": 124,
      "offX": 5,
      "offY": 5,
      "x": 377,
      "y": 124
    },
    {
      "width": 124,
      "height": 124,
      "offX": 5,
      "offY": 5,
      "x": 377,
      "y": 124
    },
    {
      "width": 124,
      "height": 124,
      "offX": 5,
      "offY": 5,
      "x": 377,
      "y": 124
    },
    {
      "width": 124,
      "height": 124,
      "offX": 5,
      "offY": 5,
      "x": 377,
      "y": 124
    },
    {
      "width": 124,
      "height": 124,
      "offX": 5,
      "offY": 5,
      "x": 377,
      "y": 248
    },
    {
      "width": 124,
      "height": 124,
      "offX": 5,
      "offY": 5,
      "x": 377,
      "y": 248
    },
    {
      "width": 124,
      "height": 124,
      "offX": 5,
      "offY": 5,
      "x": 377,
      "y": 248
    },
    {
      "width": 124,
      "height": 124,
      "offX": 5,
      "offY": 5,
      "x": 377,
      "y": 248
    },
    {
      "width": 124,
      "height": 124,
      "offX": 5,
      "offY": 5,
      "x": 377,
      "y": 248
    }
  ],
  "animations": {
    "flower": [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57]
  }
}

var data2 = {
  "width": 720,
  "offX": 0,
  "sourceW": 720,
  "sourceH": 720,
  "w": 1440,
  "frames": [
    {
      "height": 468,
      "offY": 40,
      "h": 1404,
      "x": 0,
      "y": 0,
      "file": "sprites-1.png"
    },
    {
      "height": 468,
      "offY": 40,
      "h": 1404,
      "x": 720,
      "y": 0,
      "file": "sprites-1.png"
    },
    {
      "height": 468,
      "offY": 40,
      "h": 1404,
      "x": 0,
      "y": 468,
      "file": "sprites-1.png"
    },
    {
      "height": 468,
      "offY": 40,
      "h": 1404,
      "x": 720,
      "y": 468,
      "file": "sprites-1.png"
    },
    {
      "height": 468,
      "offY": 40,
      "h": 1404,
      "x": 0,
      "y": 936,
      "file": "sprites-1.png"
    },
    {
      "height": 468,
      "offY": 40,
      "h": 1404,
      "x": 720,
      "y": 936,
      "file": "sprites-1.png"
    },
    {
      "height": 468,
      "offY": 40,
      "h": 1404,
      "x": 0,
      "y": 0,
      "file": "sprites-2.png"
    },
    {
      "height": 468,
      "offY": 40,
      "h": 1404,
      "x": 720,
      "y": 0,
      "file": "sprites-2.png"
    },
    {
      "height": 468,
      "offY": 40,
      "h": 1404,
      "x": 0,
      "y": 468,
      "file": "sprites-2.png"
    },
    {
      "height": 468,
      "offY": 40,
      "h": 1404,
      "x": 720,
      "y": 468,
      "file": "sprites-2.png"
    },
    {
      "height": 468,
      "offY": 40,
      "h": 1404,
      "x": 0,
      "y": 936,
      "file": "sprites-2.png"
    },
    {
      "height": 468,
      "offY": 40,
      "h": 1404,
      "x": 720,
      "y": 936,
      "file": "sprites-2.png"
    },
    {
      "height": 468,
      "offY": 40,
      "h": 1404,
      "x": 0,
      "y": 0,
      "file": "sprites-3.png"
    },
    {
      "height": 468,
      "offY": 40,
      "h": 1404,
      "x": 720,
      "y": 0,
      "file": "sprites-3.png"
    },
    {
      "height": 468,
      "offY": 40,
      "h": 1404,
      "x": 0,
      "y": 468,
      "file": "sprites-3.png"
    },
    {
      "height": 468,
      "offY": 40,
      "h": 1404,
      "x": 720,
      "y": 468,
      "file": "sprites-3.png"
    },
    {
      "height": 468,
      "offY": 40,
      "h": 1404,
      "x": 0,
      "y": 936,
      "file": "sprites-3.png"
    },
    {
      "height": 468,
      "offY": 40,
      "h": 1404,
      "x": 720,
      "y": 936,
      "file": "sprites-3.png"
    },
    {
      "height": 468,
      "offY": 40,
      "h": 1392,
      "x": 0,
      "y": 0,
      "file": "sprites-4.png"
    },
    {
      "height": 462,
      "offY": 46,
      "h": 1392,
      "x": 720,
      "y": 0,
      "file": "sprites-4.png"
    },
    {
      "height": 462,
      "offY": 46,
      "h": 1392,
      "x": 0,
      "y": 468,
      "file": "sprites-4.png"
    },
    {
      "height": 462,
      "offY": 46,
      "h": 1392,
      "x": 720,
      "y": 468,
      "file": "sprites-4.png"
    },
    {
      "height": 462,
      "offY": 46,
      "h": 1392,
      "x": 0,
      "y": 930,
      "file": "sprites-4.png"
    },
    {
      "height": 462,
      "offY": 46,
      "h": 1392,
      "x": 720,
      "y": 930,
      "file": "sprites-4.png"
    },
    {
      "height": 462,
      "offY": 46,
      "h": 1386,
      "x": 0,
      "y": 0,
      "file": "sprites-5.png"
    },
    {
      "height": 462,
      "offY": 46,
      "h": 1386,
      "x": 720,
      "y": 0,
      "file": "sprites-5.png"
    },
    {
      "height": 462,
      "offY": 46,
      "h": 1386,
      "x": 0,
      "y": 462,
      "file": "sprites-5.png"
    },
    {
      "height": 462,
      "offY": 46,
      "h": 1386,
      "x": 720,
      "y": 462,
      "file": "sprites-5.png"
    },
    {
      "height": 462,
      "offY": 46,
      "h": 1386,
      "x": 0,
      "y": 924,
      "file": "sprites-5.png"
    },
    {
      "height": 462,
      "offY": 46,
      "h": 1386,
      "x": 720,
      "y": 924,
      "file": "sprites-5.png"
    },
    {
      "height": 468,
      "offY": 40,
      "h": 1404,
      "x": 0,
      "y": 0,
      "file": "sprites-6.png"
    },
    {
      "height": 468,
      "offY": 40,
      "h": 1404,
      "x": 720,
      "y": 0,
      "file": "sprites-6.png"
    },
    {
      "height": 468,
      "offY": 40,
      "h": 1404,
      "x": 0,
      "y": 468,
      "file": "sprites-6.png"
    },
    {
      "height": 468,
      "offY": 40,
      "h": 1404,
      "x": 720,
      "y": 468,
      "file": "sprites-6.png"
    },
    {
      "height": 468,
      "offY": 40,
      "h": 1404,
      "x": 0,
      "y": 936,
      "file": "sprites-6.png"
    },
    {
      "height": 468,
      "offY": 40,
      "h": 1404,
      "x": 720,
      "y": 936,
      "file": "sprites-6.png"
    },
    {
      "height": 468,
      "offY": 40,
      "h": 1404,
      "x": 0,
      "y": 0,
      "file": "sprites-7.png"
    },
    {
      "height": 468,
      "offY": 40,
      "h": 1404,
      "x": 720,
      "y": 0,
      "file": "sprites-7.png"
    },
    {
      "height": 468,
      "offY": 40,
      "h": 1404,
      "x": 0,
      "y": 468,
      "file": "sprites-7.png"
    },
    {
      "height": 468,
      "offY": 40,
      "h": 1404,
      "x": 720,
      "y": 468,
      "file": "sprites-7.png"
    },
    {
      "height": 468,
      "offY": 40,
      "h": 1404,
      "x": 0,
      "y": 936,
      "file": "sprites-7.png"
    },
    {
      "height": 468,
      "offY": 40,
      "h": 1404,
      "x": 720,
      "y": 936,
      "file": "sprites-7.png"
    },
    {
      "height": 468,
      "offY": 40,
      "h": 1404,
      "x": 0,
      "y": 0,
      "file": "sprites-8.png"
    },
    {
      "height": 468,
      "offY": 40,
      "h": 1404,
      "x": 720,
      "y": 0,
      "file": "sprites-8.png"
    },
    {
      "height": 468,
      "offY": 40,
      "h": 1404,
      "x": 0,
      "y": 468,
      "file": "sprites-8.png"
    },
    {
      "height": 468,
      "offY": 40,
      "h": 1404,
      "x": 720,
      "y": 468,
      "file": "sprites-8.png"
    },
    {
      "height": 468,
      "offY": 40,
      "h": 1404,
      "x": 0,
      "y": 936,
      "file": "sprites-8.png"
    },
    {
      "height": 468,
      "offY": 40,
      "h": 1404,
      "x": 720,
      "y": 936,
      "file": "sprites-8.png"
    }
  ],
  "animations": {
    "lighter": [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47]
  }
}

$(function () {

  document.body.addEventListener('touchmove', function (e) {
    e.preventDefault();
  }, {passive: false});

  function preloadImage(names, cb, prefix) {
    window.gkaCache = window.gkaCache || []
    var n = 0,
      img,
      imgs = {}
    names.forEach(function (name) {
      img = new Image()
      window.gkaCache.push(img)
      img.onload = (function (name, img) {
        return function () {
          imgs[name] = img
          ++n === names.length && cb && cb(imgs)
        }
      })(name, img)
      img.src = (prefix || '') + name
    })
  }

  // 自动播放开始页转圈的花
  preloadImage(
    ['lighter_sprites.png'],
    function (imgs) {
      var canvas = document.getElementById('gka'),
        ctx = canvas.getContext('2d'),
        frames = data.frames,
        i = 0,
        o = {},
        key = Object.keys(data.animations)[0],
        list = data.animations[key],
        len = list.length

      var cacheCanvas = document.createElement('canvas'),
        ctxCache = cacheCanvas.getContext('2d')

      cacheCanvas.width = canvas.width
      cacheCanvas.height = canvas.height

      setInterval(function () {
        o = list[i]
        ctxCache.clearRect(0, 0, canvas.width, canvas.height)
        o = Object.prototype.toString.call(o) == '[object Array]' ? o : [o]
        for (var j = 0, t; j < o.length; j++) {
          t = data.frames[o[j]]
          ctxCache.drawImage(
            imgs[t.file] || imgs[data.file],
            t.x || data.x || 0,
            t.y || data.y || 0,
            t.width || data.width,
            t.height || data.height,
            t.offX || data.offX || 0,
            t.offY || data.offY || 0,
            t.width || data.width,
            t.height || data.height
          )
        }

        ctx.clearRect(0, 0, canvas.width, canvas.height)

        ctx.drawImage(cacheCanvas, 0, 0, canvas.width, canvas.height)
        i = ++i === len ? 0 : i
      }, 60)
    },
    './img/'
  )

  preloadImage(
    [
      'sprites-1.png',
      'sprites-2.png',
      'sprites-3.png',
      'sprites-4.png',
      'sprites-5.png',
      'sprites-6.png',
      'sprites-7.png',
      'sprites-8.png',
    ],
    function (imgs) {
      var canvas = document.getElementById('gka2'),
        ctx = canvas.getContext('2d'),
        frames = data2.frames,
        i = 0,
        o = {},
        key = Object.keys(data2.animations)[0],
        list = data2.animations[key],
        len = list.length

      var cacheCanvas = document.createElement('canvas'),
        ctxCache = cacheCanvas.getContext('2d')

      cacheCanvas.width = canvas.width
      cacheCanvas.height = canvas.height

      setInterval(function () {
        o = list[i]
        ctxCache.clearRect(0, 0, canvas.width, canvas.height)
        o = Object.prototype.toString.call(o) == '[object Array]' ? o : [o]
        for (var j = 0, t; j < o.length; j++) {
          t = data2.frames[o[j]]
          ctxCache.drawImage(
            imgs[t.file] || imgs[data2.file],
            t.x || data2.x || 0,
            t.y || data2.y || 0,
            t.width || data2.width,
            t.height || data2.height,
            t.offX || data2.offX || 0,
            t.offY || data2.offY || 0,
            t.width || data2.width,
            t.height || data2.height
          )
        }

        ctx.clearRect(0, 0, canvas.width, canvas.height)

        ctx.drawImage(cacheCanvas, 0, 0, canvas.width, canvas.height)
        i = ++i === len ? 0 : i
      }, 40)
    },
    './img/'
  )

  // swiper 数据
  var swiperData = [
    {
      id: 1,
      title: '徒步前往巴黎',
      icon: './img/swiper_icon/1.png',
      // 是否可用
      enable: false,
      desc: [
        '少年路易怀揣梦想离开故乡，',
        '徒步前往充满机遇的巴黎，',
        '成为知名制箱师的学徒。',
      ],
      songId: '7242145',
    },
    {
      id: 2,
      title: '潜心创建品牌',
      icon: './img/swiper_icon/2.png',
      enable: true,
      desc: [
        '路易先生在学徒生涯中磨练出卓越技艺。',
        '凭借远见卓识，他预见旅行必将兴起和普及。',
        '品牌专卖店的创立标志着传奇篇章的开启。',
      ],
      songId: '14053',
    },
    {
      id: 3,
      title: '家族传承历史',
      icon: './img/swiper_icon/3.png',
      enable: false,
      desc: [
        '品牌传奇绝非一蹴而就。',
        '创始人路易·威登奠定坚实基础，',
        '他的子孙后辈又将如何带领品牌前进？',
      ],
      songId: '201342654',
    },
    {
      id: 4,
      title: '经典设计诞生',
      icon: './img/swiper_icon/4.png',
      enable: false,
      desc: [
        '提起路易威登，你会联想到哪些元素？',
        '旅行硬箱、Monogram图案、棋盘格纹？',
        '让我们从这些经典背后的故事说起。',
      ],
      songId: '1287610',
    },
    {
      id: 5,
      title: '拓展商业版图',
      icon: './img/swiper_icon/5.png',
      enable: false,
      desc: [
        '安尼叶荷工坊的开设满足了更庞大的客户需求。',
        '但品牌的发展脚步从未停止。',
        '乔治·威登乘船出海，开拓海外市场。',
      ],
      songId: '1287610',
    },
    {
      id: 6,
      title: '见证交通革命',
      icon: './img/swiper_icon/6.png',
      enable: false,
      desc: [
        '19 世纪下半叶，交通行业蓬勃发展。',
        '交通变革影响人们的出行方式与旅行装备，',
        '路易威登以此契机不断创造，引领新风潮。',
      ],
      songId: '1287610',
    },
    {
      id: 7,
      title: '传奇客户轶事',
      icon: './img/swiper_icon/7.png',
      enable: false,
      desc: [
        '路易威登为每一件订制产品留下详尽记录。',
        '耀眼的客户名单中，众多历史名人位列其间，',
        '猜猜里面有哪些声名显赫的中国顾客？',
      ],
      songId: '1287610',
    },
    {
      id: 8,
      title: '非凡旅行精神',
      icon: './img/swiper_icon/8.png',
      enable: false,
      desc: [
        '路易·威登创造的旅行艺术，传承至今。',
        '旅行精神始终深植于品牌产品与设计。',
        '从箱包服装到书籍家具，都于此息息相关。',
      ],
      songId: '1287610',
    },
    {
      id: 9,
      title: '多元艺术灵感',
      icon: './img/swiper_icon/9.png',
      enable: false,
      desc: [
        '创意联动各领域杰出人士，',
        '开展多元形式跨界合作，',
        '路易威登向世界传播艺术之美。',
      ],
      songId: '1287610',
    },
    {
      id: 10,
      title: '开拓时装新域',
      icon: './img/swiper_icon/10.png',
      enable: false,
      desc: [
        '灵感巧思与卓越技艺相结合，',
        '历任创意总监迭新设计，探索时装无界可能。',
        '以摩登视角，捕捉时代趋势。',
      ],
      songId: '1287610',
    },
    {
      id: 11,
      title: '风格包袋演绎',
      icon: './img/swiper_icon/11.png',
      enable: false,
      desc: [
        '于包袋之上尽情挥洒设计创意，',
        '融合精湛工艺和现代功能，',
        '你最爱的路易威登包袋是哪一款？',
      ],
      songId: '1287610',
    },
    {
      id: 12,
      title: '承袭文化渊源',
      icon: './img/swiper_icon/12.png',
      enable: true,
      desc: [
        '自成立以来，路易威登秉承品牌传统。',
        '法式精湛制艺和可持续发展的策略，',
        '长久地印刻在品牌的基因之中。',
      ],
      songId: '1287610',
    },
    {
      id: 13,
      title: 'LV 200 Clubhouse',
      icon: './img/swiper_icon/clubhouse.png',
      enable: false,
      desc: [
        '敬请期待'
      ],
      songId: '1287610',
    },
  ]

  // 生成 swiper 结构
  function createSwiperSlide(swiperData) {
    var swiperWrapper = $('.swiper-wrapper').eq(0)

    for (var i = 0; i < swiperData.length; i++) {
      var slide = document.createElement('div')
      slide.setAttribute('class', 'swiper-slide')

      var img = document.createElement('img')
      img.setAttribute('class', 'swiper-img')
      img.setAttribute('src', swiperData[i].icon)
      slide.appendChild(img)

      var content = document.createElement('div')
      content.setAttribute('class', 'swiper-content')

      var title = document.createElement('div')
      title.setAttribute('class', 'title swiper-title')
      title.innerHTML = swiperData[i].title

      var desc = document.createElement('div')
      desc.setAttribute('class', 'desc swiper-desc')

      for (var j = 0; j < swiperData[i].desc.length; j++) {
        var descText = document.createElement('div')
        descText.setAttribute('class', 'desc-text')
        descText.innerHTML = swiperData[i].desc[j]
        desc.appendChild(descText)
      }

      content.appendChild(title)
      content.appendChild(desc)

      slide.appendChild(content)
      swiperWrapper.append(slide)
    }
  }

  createSwiperSlide(swiperData)

  // 开始按钮点击
  $('#start-btn').on('click', function () {
    console.log('click')

    // 显示详情页
    $('#page-detail').addClass('active')

    // 播放花动画
    $('.detail-flower').addClass('active')
    // 显示石头块
    $('.detail-block').addClass('active')
    $('.swiper-meihua').addClass('active')

    // 显示光动画
    $('.swiper-gka2').addClass('active')
    // 左移动显示塔图片
    console.log('@@', $('.swiper-wrapper'))

    $('.swiper-wrapper').css({
      transform: 'translate3d(0, 0, 0) rotate(0)',
    })

    $('.swiper-content').eq(0).css({
      opacity: 0,
    })

    setTimeout(function () {
      $('.swiper-content').eq(0).css({
        opacity: 1,
      })
    }, 1500)

    // 同事显示音频播放按钮和当前塔介绍文字
    $('.swiper-music').addClass('active')
    $('.swiper-handler').addClass('active')
  })


  // 当前 swiper 的序号
  var swiperIndex = 0
  // 初始化滑动部分
  var slider = new iSlider({
    wrap: '.swiper-wrapper',
    item: '.swiper-slide',
    isVertical: false,
    fullScr: false,
    lastLocate: false,
    speed: 500,
    onslide: function (index) {
      console.log(index)
      swiperIndex = index
      // 切换弹出窗内容
      // fixedDataChange(index)
      if (index == 1) {
        $('.swiper-content').eq(0).css({
          opacity: '',
        })
      }

      $('.swiper-music').removeClass('not-open')
      $('.swiper-music .swiper-music-icon').removeClass('active')

      if (swiperData[index].enable) {
        $('.swiper-music').removeClass('swiper-music-disable')
        $('.swiper-music .swiper-music-text').text('点击收听')
      } else {
        $('.swiper-music').addClass('swiper-music-disable')
        $('.swiper-music .swiper-music-text').text('敬请期待')
      }

      if (player && player.state) {
        player.pause()
      }

      $('.swiper-handler-right').show()
      if (index == swiperData.length - 1) {
        // 隐藏切换下一个
        $('.swiper-handler-right').hide()
        $('.swiper-music').addClass('not-open')
        $('.swiper-music .swiper-music-text').text('敬请期待')
      }

      swiperIndex = index
      $('.swiper-content').removeClass('active')
      $('.swiper-slide.play .swiper-content').addClass('active')


    },
  })

  // 上一条，下一调
  $('.swiper-handler-left').on('click', function () {
    slider.prev()
  })

  $('.swiper-handler-right').on('click', function () {
    slider.next()
  })

  var player = null

  // 初始化音乐播放器
  function musicInit() {
    if (!player) {
      player = new QMplayer()
    }

    player.on('play', function () {
      console.log('播放')
      $('.swiper-music-text').text('点击关闭')
      $('.swiper-music-icon').addClass('active')
    })
    /* 监听音视频暂停 */
    player.on('pause', function () {
      console.log('暂停', swiperIndex)
      if (swiperIndex == swiperData.length - 1) {
        return
      }
      $('.swiper-music-text').text('点击收听')
      $('.swiper-music-icon').removeClass('active')
    })
    /* 监听音视频播放结束后暂停播放 */
    player.on('ended', function () {
      console.log('ended', swiperIndex)
      if (swiperIndex == swiperData.length - 1) {
        return
      }
      console.log('结束')
      $('.swiper-music-text').text('点击收听')
      $('.swiper-music-icon').removeClass('active')
    })
  }

  // 初始化音乐播放器
  musicInit()

  $('#music').on('click', function () {
    if ($('.swiper-music').hasClass('swiper-music-disable')) {
      return;
    }
    console.log('播放音乐', swiperData[swiperIndex].songId)
    player.play(swiperData[swiperIndex].songId)
  })
})
